(this["webpackJsonpvk-wallet"]=this["webpackJsonpvk-wallet"]||[]).push([[0],{343:function(e,t){},346:function(e,t){},349:function(e,t){},353:function(e,t){},377:function(e,t){},379:function(e,t){},390:function(e,t){},392:function(e,t){},402:function(e,t){},404:function(e,t){},514:function(e,t){},516:function(e,t){},523:function(e,t){},524:function(e,t){},623:function(e,t,n){"use strict";n.r(t);var c,r=n(0),i=n(68),a=n.n(i),o=n(34),s=n.n(o),l=n(23),j=n(70),d=n(69),u=n(25),b=n.n(u),f=n(6),O=(n(328),n(2)),p=function(e){var t=e.id,n=e.fetchedUser;return Object(O.jsxs)(f.n,{id:t,children:[Object(O.jsx)(f.o,{children:"Example"}),n&&Object(O.jsx)(f.i,{header:Object(O.jsx)(f.j,{mode:"secondary",children:"User Data Fetched with VK Bridge"}),children:Object(O.jsx)(f.e,{before:n.photo_200?Object(O.jsx)(f.c,{src:n.photo_200}):null,description:n.city&&n.city.title?n.city.title:"",children:"".concat(n.first_name," ").concat(n.last_name)})}),Object(O.jsx)(f.i,{header:Object(O.jsx)(f.j,{mode:"secondary",children:"Navigation Example"}),children:Object(O.jsx)(f.g,{children:Object(O.jsx)(f.d,{stretched:!0,size:"l",mode:"secondary",onClick:function(){return console.log("xxx")},"data-to":"persik",children:"Show me the Persik, please"})})})]})},h=n.p+"static/media/persik.ae9f0072.png",x=function(e){return Object(O.jsxs)(f.n,{id:e.id,children:[Object(O.jsx)(f.o,{left:Object(O.jsx)(f.p,{onClick:console.log("adawd"),"data-to":"home"}),children:"Persik"}),Object(O.jsx)("img",{className:"Persik",src:h,alt:"Persik The Cat"})]})},k=n(627),v=n(628),m=n(629),w=n(630),g=n(631),y=n(632),C=n(35),S=Object(C.c)({name:"panel",initialState:{panel:"menu",panels:{menu:"menu",wallet:"wallet",transaction:"transaction",history:"history",settings:"settings",vault:"vault"},history:[]},reducers:{setPanel:function(e,t){e.panel=e.panels[t.payload],e.history.push(t.payload)}}}),I=S.actions.setPanel,W=S.reducer,K=function(e){var t=Object(l.c)((function(e){return e.panel.panels})),n=Object(l.b)();return Object(O.jsxs)(f.n,{id:e.id,children:[Object(O.jsx)(f.o,{right:Object(O.jsx)(k.a,{}),children:"VK Wallet"}),Object(O.jsx)(f.i,{children:Object(O.jsxs)(f.k,{children:[Object(O.jsx)(f.e,{expandable:!0,onClick:function(){return n(I(t.wallet))},before:Object(O.jsx)(v.a,{}),children:"Wallet"}),Object(O.jsx)(f.e,{expandable:!0,onClick:function(){return n(I(t.transaction))},before:Object(O.jsx)(m.a,{}),children:"Transaction"}),Object(O.jsx)(f.e,{expandable:!0,onClick:function(){return n(I(t.history))},before:Object(O.jsx)(w.a,{}),children:"History"}),Object(O.jsx)(f.e,{expandable:!0,onClick:function(){return n(I(t.settings))},before:Object(O.jsx)(g.a,{}),children:"Settings"}),Object(O.jsx)(f.e,{expandable:!0,onClick:function(){return n(I(t.vault))},before:Object(O.jsx)(y.a,{}),children:"Vault"})]})})]})},E=n(634),T=n(635),L=n(636),P=n(637),B=n(638),N=n(639),z=n(640),V=n(641),A=n(642),R=n(46),q=n(221),D=n.n(q),H=null,U=null,_=Object(C.b)("wallet/addTokens",function(){var e=Object(j.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.eth.getBalance(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),G=Object(C.b)("wallet/fetchBalance",function(){var e=Object(j.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.eth.getBalance(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),J=Object(C.b)("wallet/createWallet",Object(j.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H.eth.accounts.create();case 2:return t=e.sent,U=t,e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})))),F=Object(C.c)({name:"wallet",initialState:{isLoading:!1,error:null,wallet:null,wallets:{},provider:"infura",providers:{infura:{projectId:"3c32cdd37b124fed85037dd52f7a70c5",connectionString:"https://NETWORK.infura.io/v3/ID"},moralis:{projectId:"77b402448f33b6dbeee056e9",connectionString:"https://speedy-nodes-nyc.moralis.io/ID/eth/NETWORK"}},network:"rinkeby",networks:{rinkeby:{blockchain:"Ethereum rinkeby",logo:""},mainnet:{blockchain:"Ethereum mainnet",logo:""},ropsten:{blockchain:"Ethereum ropsten",logo:""},kovan:{blockchain:"Ethereum kovan",logo:""},goerli:{blockchain:"Ethereum goerli",logo:""}},history:[],balance:null,connectionString:"https://rinkeby.infura.io/v3/3c32cdd37b124fed85037dd52f7a70c5",web3IsOn:!1},reducers:{selectNetwork:function(e,t){e.network=t.payload,e.connectionString=e.providers[e.provider].connectionString.replace(/ID/gm,e.providers[e.provider].projectId).replace(/NETWORK/gm,e.network)},selectProvider:function(e,t){e.provider=t.payload,e.connectionString=e.providers[e.provider].connectionString.replace(/ID/gm,e.providers[e.provider].projectId).replace(/NETWORK/gm,e.network)},addToHistory:function(e,t){e.history.filter((function(e){return e.transactionHash===t.payload.transactionHash}))||e.history.push(t.payload)},connect:function(e){(H=new D.a(e.connectionString))&&(e.web3IsOn=!0)}},extraReducers:(c={},Object(R.a)(c,G.pending,(function(e){e.isLoading=!0})),Object(R.a)(c,G.fulfilled,(function(e,t){e.balance=t.payload,e.isLoading=!1})),Object(R.a)(c,G.rejected,(function(e){e.error=!0,e.isLoading=!1})),Object(R.a)(c,J.pending,(function(e){e.isLoading=!0})),Object(R.a)(c,J.fulfilled,(function(e){e.wallet={address:U.address,privateKey:U.privateKey},e.isLoading=!1})),Object(R.a)(c,J.rejected,(function(e){e.isLoading=!1,e.error=!0})),c)}),M=F.actions,Q=M.selectNetwork,X=(M.setBalance,M.addToHistory,M.selectWallet,M.selectProvider),Y=M.connect,Z=F.reducer,$=function(e){var t=Object(l.b)(),n=Object(r.useState)(),c=Object(d.a)(n,2),i=c[0],a=c[1],o=Object(l.c)((function(e){return e.panel.panels})),s=Object(l.c)((function(e){return e.wallet.web3IsOn})),j=Object(l.c)((function(e){return e.wallet.wallet})),u=Object(l.c)((function(e){return e.wallet.balance}));return Object(O.jsxs)(f.n,{id:e.id,children:[Object(O.jsx)(f.o,{left:Object(O.jsx)(f.p,{onClick:function(){return t(I(o.menu))}}),children:"Wallet"}),!s&&Object(O.jsx)(f.q,{action:Object(O.jsx)(f.d,{size:"l",before:Object(O.jsx)(E.a,{}),appearance:"accent",stretched:!0,onClick:function(){return t(Y())},children:"Connect"}),icon:Object(O.jsx)(T.a,{}),stretched:!0,children:"Blockchain network"}),s&&Object(O.jsx)(f.i,{children:Object(O.jsxs)(f.k,{children:[!j&&Object(O.jsx)(f.f,{before:Object(O.jsx)(f.c,{shadow:!1,size:72,mode:"image",children:Object(O.jsx)(v.a,{})}),onClick:function(){return t(J())},children:"Create wallet"}),j&&Object(O.jsx)(f.e,{before:Object(O.jsx)(L.a,{}),after:Object(O.jsx)(P.a,{}),expandable:!0,onClick:function(){j&&navigator.clipboard.writeText(j.address),a(!0)},children:"Public address"}),j&&Object(O.jsx)(f.l,{before:Object(O.jsx)(B.a,{}),textWrap:"full",textLevel:"secondary",children:j.address}),j&&Object(O.jsx)(f.e,{expandable:!0,before:Object(O.jsx)(N.a,{}),after:Object(O.jsx)(z.a,{}),onClick:function(){t(G(j.address))},children:"Balance"}),j&&u&&Object(O.jsx)(f.l,{before:Object(O.jsx)(B.a,{}),textWrap:"full",textLevel:"secondary",children:u}),j&&Object(O.jsx)(f.e,{expandable:!0,before:Object(O.jsx)(V.a,{}),after:Object(O.jsx)(P.a,{}),onClick:function(){j&&navigator.clipboard.writeText(j.privateKey),a(!0)},children:"Private Key"}),j&&Object(O.jsx)(f.l,{before:Object(O.jsx)(B.a,{}),textWrap:"full",textLevel:"secondary",children:"".concat(j.privateKey.slice(0,10),"...")})]})}),i&&Object(O.jsx)(f.s,{onClose:function(){return a(!1)},before:Object(O.jsx)(f.c,{size:24,children:Object(O.jsx)(A.a,{width:14,height:14})}),children:"Copied to clipboard"})]})},ee=function(e){return Object(O.jsx)(f.n,{id:e.id,children:Object(O.jsx)(f.o,{left:Object(O.jsx)(f.p,{onClick:function(){return console.log("work")}}),children:e.id})})},te=function(e){return Object(O.jsx)(f.n,{id:e.id,children:Object(O.jsx)(f.o,{left:Object(O.jsx)(f.p,{onClick:function(){return console.log("work")}}),children:e.id})})},ne=function(e){var t=Object(l.c)((function(e){return e.panel.panels})),n=Object(l.c)((function(e){return e.wallet.providers})),c=Object(l.c)((function(e){return e.wallet.networks})),r=Object(l.b)();return Object(O.jsxs)(f.n,{id:e.id,children:[Object(O.jsx)(f.o,{left:Object(O.jsx)(f.p,{onClick:function(){return r(I(t.menu))}}),children:"Settings"}),Object(O.jsxs)(f.i,{children:[Object(O.jsx)(f.h,{top:"Select provider",children:Object(O.jsx)(f.m,{onInput:function(e){return r(X(e.target.value))},children:Object.keys(n).map((function(e){return Object(O.jsx)("option",{value:e,children:e},e)}))})}),Object(O.jsx)(f.h,{top:"Select network",children:Object(O.jsx)(f.m,{onInput:function(e){return r(Q(e.target.value))},children:Object.keys(c).map((function(e){return Object(O.jsx)("option",{value:e,children:e},e)}))})})]})]})},ce=n(643),re=n(644),ie=n(645),ae=function(e){var t=Object(l.b)(),n=Object(r.useState)(),c=Object(d.a)(n,2),i=c[0],a=c[1],o=Object(l.c)((function(e){return e.panel.panels})),s=Object(l.c)((function(e){return e.wallet.wallet}));return Object(O.jsxs)(f.n,{id:e.id,children:[Object(O.jsx)(f.o,{left:Object(O.jsx)(f.p,{onClick:function(){return t(I(o.menu))}}),children:"Vault"}),!s&&Object(O.jsx)(f.q,{action:Object(O.jsx)(f.d,{size:"l",before:Object(O.jsx)(ce.a,{}),appearance:"accent",stretched:!0,onClick:function(){return t(I(o.wallet))},children:"Go to wallet screen"}),icon:Object(O.jsx)(re.a,{}),stretched:!0,children:"Wallet not connected"}),s&&Object(O.jsx)(f.q,{action:Object(O.jsx)(f.d,{size:"l",before:Object(O.jsx)(y.a,{}),appearance:"accent",stretched:!0,onClick:function(){a(!0),t(_(s.address))},children:"Request free tokens"}),icon:Object(O.jsx)(ie.a,{}),stretched:!0,children:"Vault - bank of free tokens"}),i&&Object(O.jsx)(f.s,{onClose:function(){return a(!1)},before:Object(O.jsx)(f.c,{size:24,children:Object(O.jsx)(A.a,{width:14,height:14})}),children:"Tokens requested"})]})},oe=function(){var e=Object(l.c)((function(e){return e.panel.panel})),t=Object(l.c)((function(e){return e.wallet.isLoading})),n=Object(r.useState)(null),c=Object(d.a)(n,2),i=c[0],a=c[1];return Object(r.useEffect)((function(){function e(){return(e=Object(j.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.send("VKWebAppGetUserInfo");case 2:t=e.sent,a(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}s.a.subscribe((function(e){var t=e.detail,n=t.type,c=t.data;if("VKWebAppUpdateConfig"===n){var r=document.createAttribute("scheme");r.value=c.scheme?c.scheme:"client_light",document.body.attributes.setNamedItem(r)}})),function(){e.apply(this,arguments)}()}),[]),Object(O.jsx)(f.a,{children:Object(O.jsx)(f.b,{children:Object(O.jsxs)(f.t,{activePanel:e,popout:t&&Object(O.jsx)(f.r,{size:"large"}),children:[Object(O.jsx)(p,{id:"home",fetchedUser:i}),Object(O.jsx)(x,{id:"persik"}),Object(O.jsx)(K,{id:"menu"}),Object(O.jsx)($,{id:"wallet"}),Object(O.jsx)(ee,{id:"transaction"}),Object(O.jsx)(te,{id:"history"}),Object(O.jsx)(ne,{id:"settings"}),Object(O.jsx)(ae,{id:"vault"})]})})})},se=Object(C.c)({name:"counter",initialState:{value:0},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}}}),le=se.actions,je=(le.increment,le.decrement,le.incrementByAmount,se.reducer),de=Object(C.a)({reducer:{counter:je,wallet:Z,panel:W}});s.a.send("VKWebAppInit"),a.a.render(Object(O.jsx)(l.a,{store:de,children:Object(O.jsx)(oe,{})}),document.getElementById("root"))}},[[623,1,2]]]);
//# sourceMappingURL=main.f09a75b3.chunk.js.map